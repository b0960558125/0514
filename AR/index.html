<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AR Êµ∑ÈóúËã±ÊñáÈÅ∏ÊìáÈ°åÈÅäÊà≤</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/1.7.2/aframe/build/aframe-ar.min.js"></script>
    <style>
      #question-box {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        width: 90%;
        max-width: 600px;
        font-size: 1.2em;
        border-radius: 10px;
        box-shadow: 0 0 10px #00000055;
        display: none; /* ‰∏ÄÈñãÂßãÈö±Ëóè */
      }
      #buttons {
        margin-top: 15px;
        display: flex;
        justify-content: space-around;
      }
      button {
        font-size: 1em;
        padding: 10px 20px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        user-select: none;
      }
      button.correct {
        background-color: #4caf50;
        color: white;
      }
      button.wrong {
        background-color: #f44336;
        color: white;
      }
      #result {
        margin-top: 10px;
        font-weight: bold;
        text-align: center;
        color: #d32f2f;
      }
    </style>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
    >
      <a-nft
        id="marker"
        type="mind"
        url="targets"
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5"
      >
        <a-box position="0 0.5 0" material="color: blue; opacity: 0.5"></a-box>
      </a-nft>
      <a-entity camera></a-entity>
    </a-scene>

    <div id="question-box">
      <div id="question-text"></div>
      <div id="buttons">
        <button id="btn-correct" class="correct"></button>
        <button id="btn-wrong" class="wrong"></button>
      </div>
      <div id="result"></div>
    </div>

    <script>
      const questions = [
        {
          question: "1. What is the purpose of your visit? Ôºà‰Ω†ÁöÑÈÄ†Ë®™ÁõÆÁöÑÔºâ",
          correct: "It‚Äôs a vacation.",
          wrong: "I‚Äôm by myself.",
        },
        {
          question: "2. Where will you be staying? Ôºà‰Ω†È†êË®àÊúÉÁü≠‰ΩèÂú®Âì™Ë£°ÔºüÔºâ",
          correct: "A friend‚Äôs place",
          wrong: "Two weeks",
        },
        {
          question: "3. How long will you be staying?Ôºà‰Ω†È†êË®àÊúÉÂÅúÁïôÂ§ö‰πÖÔºüÔºâ",
          correct: "Two weeks",
          wrong: "My cousin‚Äôs place.",
        },
        {
          question: "4. What are you planning to do during your visit? Ôºà‰Ω†È†êË®àÈÄôÊÆµÊúüÈñìÊúÉÂÅö‰∫õ‰ªÄÈ∫ºÔºâ",
          correct: "Shopping",
          wrong: "I‚Äôm by myself.",
        },
        {
          question: "5. Will you be visiting other cities? Ôºà‰Ω†ÊúÉÂéªÂÖ∂‰ªñÂüéÂ∏ÇÂóéÔºüÔºâ",
          correct: "Yes, I‚Äôll also go to Ôº¨Ôº°.",
          wrong: "I come from Taiwan",
        },
        {
          question: "6. Who are you traveling with? Ôºà‰Ω†ÂíåË™∞‰∏ÄËµ∑‰æÜÂë¢ÔºüÔºâ",
          correct: "My friends",
          wrong: "A friend‚Äôs place",
        },
        {
          question: "7. Do you have a return ticket? Ôºà‰Ω†ÊúâÂõûÁ®ãÊ©üÁ•®ÂóéÔºüÔºâ",
          correct: "My return flight is on July 4th.",
          wrong: "I'm visiting my friend.",
        },
        {
          question: "8. Good afternoon. May I see your passport, please?Ôºà‰∏ãÂçàÂ•ΩÔºåÊàëÂèØ‰ª•Áúã‰Ω†ÁöÑË≠∑ÁÖßÂóéÔºüÔºâ",
          correct: "Sure, here you go.",
          wrong: "NO!",
        },
        {
          question: "9. How much money are you carrying?Ôºà‰Ω†Â∏∂‰∫ÜÂ§öÂ∞ëÁèæÈáëÔºüÔºâ",
          correct: "I have about 500 US dollars and a credit card.",
          wrong: "I have about 5 US dollars.",
        },
        {
          question: "10. What‚Äôs your occupation? (‰Ω†ÁöÑËÅ∑Ê•≠‰ªÄÈ∫ºÔºüÔºâ",
          correct: "I am a teacher.",
          wrong: "Sure, here you go.",
        },
      ];

      let currentIndex = 0;
      const questionBox = document.getElementById("question-box");
      const questionText = document.getElementById("question-text");
      const btnCorrect = document.getElementById("btn-correct");
      const btnWrong = document.getElementById("btn-wrong");
      const resultDiv = document.getElementById("result");

      function showQuestion() {
        const q = questions[currentIndex];
        questionText.textContent = q.question;
        btnCorrect.textContent = q.correct;
        btnWrong.textContent = q.wrong;
        resultDiv.textContent = "";
      }

      function endGame(msg) {
        resultDiv.textContent = msg + " ÈÅäÊà≤ÁµêÊùüÔºÅË´ãÈáçÊñ∞Êï¥ÁêÜÈ†ÅÈù¢ÂÜçÁé©‰∏ÄÊ¨°„ÄÇ";
        btnCorrect.disabled = true;
        btnWrong.disabled = true;
      }

      function nextQuestion() {
        currentIndex++;
        if (currentIndex >= questions.length) {
          resultDiv.textContent = "ÊÅ≠Âñú‰Ω†ÂÖ®ÈÉ®Á≠îÂ∞çÔºÅÈÅäÊà≤ÂÆåÊàêÔºÅüéâ";
          btnCorrect.disabled = true;
          btnWrong.disabled = true;
          return;
        }
        showQuestion();
      }

      btnCorrect.addEventListener("click", () => {
        const q = questions[currentIndex];
        if (currentIndex % 2 === 0) {
          nextQuestion();
        } else {
          endGame(`ÈÄôÈ°åÊ≠£Á¢∫Á≠îÊ°àÊòØÔºö${q.correct}`);
        }
      });

      btnWrong.addEventListener("click", () => {
        if (currentIndex % 2 === 0) {
          const q = questions[currentIndex];
          endGame(`ÈÄôÈ°åÊ≠£Á¢∫Á≠îÊ°àÊòØÔºö${q.correct}`);
        } else {
          nextQuestion();
        }
      });

      // ÂÖà‰∏çÈ°ØÁ§∫È°åÁõÆÔºåÁ≠âÊéÉÂà∞Ê®ôË®òÊâçÈ°ØÁ§∫
      questionBox.style.display = "none";

      // Áõ£ËÅΩmarker‰∫ã‰ª∂
      const marker = document.querySelector("#marker");
      marker.addEventListener("markerFound", () => {
        questionBox.style.display = "block";
        // ÈñãÂßãÈ°ØÁ§∫È°åÁõÆ
        currentIndex = 0;
        btnCorrect.disabled = false;
        btnWrong.disabled = false;
        showQuestion();
        resultDiv.textContent = "";
      });
      marker.addEventListener("markerLost", () => {
        questionBox.style.display = "none";
      });
    </script>
  </body>
</html>
